<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en"><generator uri="https://jekyllrb.com/" version="4.3.4">Jekyll</generator><link href="https://c-dickens.github.io/feed.xml" rel="self" type="application/atom+xml"/><link href="https://c-dickens.github.io/" rel="alternate" type="text/html" hreflang="en"/><updated>2025-08-10T10:08:45+00:00</updated><id>https://c-dickens.github.io/feed.xml</id><title type="html">blank</title><subtitle>#A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design. </subtitle><entry><title type="html">Reflections on a resignation</title><link href="https://c-dickens.github.io/blog/2024/reflections/" rel="alternate" type="text/html" title="Reflections on a resignation"/><published>2024-09-20T14:45:00+00:00</published><updated>2024-09-20T14:45:00+00:00</updated><id>https://c-dickens.github.io/blog/2024/reflections</id><content type="html" xml:base="https://c-dickens.github.io/blog/2024/reflections/"><![CDATA[<p>Today is scary. For the first time since the age of fifteen, when I close my laptop, I will officially be jobless. Unemployed. Without income. Racking up student loan interest quickly enough to keep even Max Verstappen in my rear-view mirror.</p> <p>But it‚Äôs not bad news! From the 30th September I will join Entrepreneur First as a <em>Founder in Residence</em>. It‚Äôs a risk. It‚Äôs different. But I can‚Äôt wait.</p> <p>Rewind.</p> <p>I don‚Äôt know exactly when it started, but I remember it happening. I had come into a rather large collection of K‚Äônex. I‚Äôd loved Lego and Bionicles for quite some time, but k‚Äônex is what hooked me. I‚Äôd spend hours building the kits, making mechanical objects that could do all sorts of things according to the instructions: but that wasn‚Äôt what interested me. I‚Äôd spend hours upon hours making, of all things‚Ä¶k‚Äônex chairlifts. No instruction booklets, no point to any of it, just k‚Äônex chairlifts in all shapes and sizes. What was the smallest lift I could build? What was the biggest one? Could I build a chain out of all the pieces or did I need to use string to connect them all? I distinctly recall spending one Friday evening turning the family entire kitchen into a huge snaking network of different lift systems, all powered by various (manual) gear systems that I‚Äôd fashioned out of the cogs. All I wanted to know was how many more could I add? How could I get them to work in unison without crashing or colliding? It was the first time I‚Äôd just been able to let loose on something that I (and almost certainly nobody else) enjoyed building out of nothing but curiosity and enjoyment.</p> <p>Over time, this mild curiosity evolved: bookended by amateurish tinkering with electronics at school and, most significantly, as university approached a keen interest in learning to cook ‚Äúproperly‚Äù. The starting point of which was to perfect the baking of Chocolate Fondants over the course of a summer. About one hundred fondants later, each batch better than the last, I was confident that I had conquered the humble dessert. Another Friday evening was spent determinedly making puff pastry from scratch: roll, fold, in the fridge, twenty minutes, out of the fridge, roll,‚Ä¶for about three hours. Needless to say my Mom did not leave a courteous gratuity for the timely dinner service that night.</p> <p>What I have learnt over all this time, is that the kitchen is where my curiosity awakes. Annoyingly, on Friday nights.</p> <p>But why is this relevant to my resignation?</p> <p>It is early summer 2021. I‚Äôve recently received a LinkedIn message from someone at a company called Entrepreneur First. He explains that they want the best people to come in with big ideas and build the companies of tomorrow. This sounds exciting but, frankly, the timing couldn‚Äôt be worse. My PhD viva is imminent and then I plan to take my returning offer working with the team I interned with at Yahoo. The truth is that I am mentally spent. I‚Äôve been playing a decade long game on a never-ending conveyor belt. A levels, degree, PhD. I need rest. And structure.</p> <p>Looking back, I can tell somewhat perversely (for reasons much clearer now than at the time) that this conveyor belt suppressed the boy who built k‚Äônex in his kitchen because this person was always looking for the next rung of the ladder up the mountain; never taking the time to survey the route taken and learn what could be improved like with each freshly baked batch of fondants. It felt like winning at a game I wasn‚Äôt entirely and resolutely certain I wanted to compete in. The k‚Äônex kid would‚Äôve taken the taken the phone call from EF, been interested beyond articulation in the chance to build the next big thing and applied on the spot. But my confidence was in such a weird place at that point that I couldn‚Äôt bring myself to do it. It was there. But it was‚Ä¶fragile. Brittle. Hurt.</p> <p>It‚Äôs summer 2024. Three years after joining Yahoo I have seen another advert for EF. Rather than ignoring it this time, I decided to submit an application. In previous communications I seem to recall that acceptance rates of about three percent were mentioned (I‚Äôve no idea how accurate that was or is): nonetheless, I wasn‚Äôt particularly hopeful as I knew competition would be fierce. But over these past three years something has changed that has put me back closer to that youthful and playful curiosity of just wanting to try something for the fun of it and for the process of learning from it. Part of this I attribute to my fantastic colleagues, Alex Saydakov, Jon Malkin, and Lee Rhodes ‚Äî possibly the three best engineers I will ever encounter ‚Äî whose influence on me has been immeasurable. They have given me the confidence to just try something new, learn as I go, document and test (‚Ä¶and version control) everything I do. In drilling down on particular performance features of different algorithms‚Äô implementations, it has helped me find again that yearning curiosity I had when I was much younger. However, in doing so, that has given me the motivation to go and try something totally new.</p> <p>Of course, I hope that I am successful in this endeavour but there is no way of knowing without going all in. That‚Äôs the primary reason for the resignation ‚Äî that to do this properly I need to be one hundred percent committed knowing that for now this is all I am focused on. In some sense this is always what I‚Äôve wanted to do: growing up, my best friend and I would mock up different businesses that we‚Äôd like to run in future. I suppose that both of us being the children of parents running their own companies made it seem normal that one day you <em>just would</em> start up by yourself. Seeing him and another close school friend each start their own businesses reignited that flame from when I was younger but I needed to wait until k‚Äônex kid‚Äôs curiosity caught up.</p> <p>I did other things between those two time points that gave me vital experience like refereeing semi-professional football. This role gave me a level of autonomy no other work experience could and is to-date the best ‚Äúpeople learning‚Äù experience I‚Äôve had. I‚Äôm not sure there are many roles fundamentally requiring independence, leadership, <em>and</em> teamwork so crucially from day one. But working in corporate technology has, at times, felt glacial compared to the dynamism of the football field ‚Äî an environment that I loved. That isn‚Äôt a criticism and I understand why it‚Äôs the case. Those charged with reinvigorating a pioneering internet company have much more important concerns than my desire to move a little faster. I wish them all the best in doing so as Yahoo has been a fantastic place to learn and grow alongside amazing colleagues.</p> <p>However, with my curiosity back and a hunger for change, it was exciting when, during the application process, Entrepreneur First shared a ‚Äú<a href="https://www.joinef.com/programs/who-we-invest-in/">Who we invest in</a>‚Äù doc. For the first time since getting on the academic conveyor belt at fifteen I felt that I‚Äôd found a description of something entirely me. Curiosity. Speed. Autonomy.</p> <p>So for now my laptop is closed. Tomorrow the kick off weekend starts and with it a risky but exciting path ahead. The New Curiosity Shop is open üòâ And it‚Äôs time for me to work.</p>]]></content><author><name>Charlie Dickens</name></author><category term="career"/><summary type="html"><![CDATA[Today is scary. For the first time since the age of fifteen, when I close my laptop, I will officially be jobless. Unemployed. Without income. Racking up student loan interest quickly enough to keep even Max Verstappen in my rear-view mirror.]]></summary></entry><entry><title type="html">Who is better at penalties? Men or Women?</title><link href="https://c-dickens.github.io/blog/2024/penalties/" rel="alternate" type="text/html" title="Who is better at penalties? Men or Women?"/><published>2024-05-07T11:03:16+00:00</published><updated>2024-05-07T11:03:16+00:00</updated><id>https://c-dickens.github.io/blog/2024/penalties</id><content type="html" xml:base="https://c-dickens.github.io/blog/2024/penalties/"><![CDATA[<h1 id="analysing-mens-and-womens-football-penalties">Analysing Men‚Äôs and Women‚Äôs Football Penalties</h1> <h2 id="1-introduction">1. Introduction</h2> <p>I recently came across a dataset that had historic penalty performance for a variety of football matches over the past twenty-or-so years. The data has in it both men‚Äôs and women‚Äôs performances so I thought it might be interesting to compare and contrast the performance of each, particularly given the increase in popularity of women‚Äôs of the last few years. The code for this analysis can be found on <a href="https://github.com/c-dickens/my-demos/blob/main/notebooks/penalties_men_vs_women.ipynb">my Github</a>:</p> <p>It was found that the success rate of women‚Äôs performance varied quite strongly over time, while the men‚Äôs performance was relatively consistent in comparison. This led to a few further insights:</p> <ol> <li>Prior to 2018, the women‚Äôs conversion rate can be up to twenty percentage points higher than the men‚Äôs conversion rate.</li> <li>After 2018, the women‚Äôs conversion rate drops to nearer to the male conversion rate.</li> <li>These differences are statistically significant.</li> </ol> <h2 id="2-analysis">2. Analysis</h2> <p>The first step of the analysis was to evaluate the mean conversion rate for each gender over every year in the dataset as shown below.</p> <table> <thead> <tr> <th>year</th> <th>mean_male</th> <th>num_penalties_male</th> <th>scored_male</th> <th>mean_female</th> <th>num_penalties_female</th> <th>scored_female</th> </tr> </thead> <tbody> <tr> <td>2003</td> <td>1.000000</td> <td>73</td> <td>73</td> <td>1.000000</td> <td>8</td> <td>8</td> </tr> <tr> <td>2007</td> <td>0.820896</td> <td>536</td> <td>440</td> <td>1.000000</td> <td>7</td> <td>7</td> </tr> <tr> <td>2008</td> <td>0.852273</td> <td>528</td> <td>450</td> <td>1.000000</td> <td>7</td> <td>7</td> </tr> <tr> <td>2009</td> <td>0.819113</td> <td>586</td> <td>480</td> <td>1.000000</td> <td>12</td> <td>12</td> </tr> <tr> <td>2010</td> <td>0.787572</td> <td>692</td> <td>545</td> <td>1.000000</td> <td>18</td> <td>18</td> </tr> <tr> <td>2011</td> <td>0.795518</td> <td>714</td> <td>568</td> <td>0.885714</td> <td>70</td> <td>62</td> </tr> <tr> <td>2012</td> <td>0.782421</td> <td>694</td> <td>543</td> <td>1.000000</td> <td>40</td> <td>40</td> </tr> <tr> <td>2013</td> <td>0.801460</td> <td>685</td> <td>549</td> <td>0.804348</td> <td>46</td> <td>37</td> </tr> <tr> <td>2014</td> <td>0.754941</td> <td>759</td> <td>573</td> <td>1.000000</td> <td>19</td> <td>19</td> </tr> <tr> <td>2015</td> <td>0.757616</td> <td>755</td> <td>572</td> <td>0.929577</td> <td>71</td> <td>66</td> </tr> <tr> <td>2016</td> <td>0.767492</td> <td>929</td> <td>713</td> <td>1.000000</td> <td>51</td> <td>51</td> </tr> <tr> <td>2017</td> <td>0.775408</td> <td>797</td> <td>618</td> <td>0.880000</td> <td>125</td> <td>110</td> </tr> <tr> <td>2018</td> <td>0.772242</td> <td>843</td> <td>651</td> <td>0.844660</td> <td>206</td> <td>174</td> </tr> <tr> <td>2019</td> <td>0.788560</td> <td>979</td> <td>772</td> <td>0.854839</td> <td>310</td> <td>265</td> </tr> <tr> <td>2020</td> <td>0.823759</td> <td>1027</td> <td>846</td> <td>0.831169</td> <td>231</td> <td>192</td> </tr> <tr> <td>2021</td> <td>0.784272</td> <td>941</td> <td>738</td> <td>0.778443</td> <td>334</td> <td>260</td> </tr> <tr> <td>2022</td> <td>0.744845</td> <td>776</td> <td>578</td> <td>0.699029</td> <td>309</td> <td>216</td> </tr> </tbody> </table> <p>Plotting these results (including standard deviations, which are omitted from the table) we see that there is some interesting behaviour. The simplest to see is that after about $2005$ the male conversion rate settles around $80\%$. Looking at the number of penalties, we can be reasonably confident in this figure as only year $2003$ has a small number of penalties; the remaining years have in excess of $500$ penalties taken by men for that year. On the other hand, the women‚Äôs figure is initially very noisy which is likely a consequence of having relatively few penalties included in the data. Only at year $2017$ are more than $100$ penalties included. One feature of this data that is important is that in $2018$, women‚Äôs league data is included, but it already appears that the general trend of conversion rate approaches that of men‚Äôs when enough penalties are included; adding the league data seems to strengthen this trend.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/gender_comparison.jpg" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="conversions" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Conversion rates by gender over time. </div> <h3 id="21-results-1-and-2">2.1 Results 1 and 2</h3> <p>This plot shows that after about $2007$, the male conversion rate is stable, meanwhile the female rate is noisy. The two rates are similar after $2018$, indicating a slight change in behaviour. The change in rate for females looks to appear at abour $2016$, however, the scale of data is still smaller in $2016-2017$ compared to $2018$ onwards so we use this as the point of demarcation, especially since this is when the women‚Äôs league data is included.</p> <p>Prior to $2018$ the women have much less consistent standard deviations which could be due to the relative scarcity of data compared to the male dataset (sometimes the there are more than $10\times$ more male penalties than female penalties in a year). Once the number of penalties recorded is on the same scale, the deviations look similar.</p> <p>In summary, there is a shift in performance before $2018$ and after $2018$ for women.<br/> Male performance is roughly similar throughout. In the time period up to $2018$ womens‚Äô conversion rate noisily moves between $0.8$ and $1.0$ which is about $20$ percentage points higher than the typical male conversion rate.<br/> This large difference does suggest that behaviour is different between male and female takers prior to $2018$.</p> <h3 id="result-3">Result 3</h3> <p>We employ hypothesis testing to more emphatically answer <em>is there a difference in penalty conversion rates between men and women?</em> The attributes we test for independence are <code class="language-plaintext highlighter-rouge">gender</code> and <code class="language-plaintext highlighter-rouge">conversion_rate</code> in the original data. If <code class="language-plaintext highlighter-rouge">conversion_rate</code> is statistically independent of <code class="language-plaintext highlighter-rouge">gender</code>, then we would expect that the conversion rates should be similar, irrespective of the whether <code class="language-plaintext highlighter-rouge">gender == male</code> or <code class="language-plaintext highlighter-rouge">gender == female</code>.</p> <h4 id="test-details">Test details</h4> <ul> <li>We use the chi-squared test for independence which is valid since we have categorical input variables, all observations are assumed to be independent, the sample size is large (in this context large means greater than $\approx 5$ as otherwise we would use a different test) as in total it is on the order of thousands of observations.</li> <li>We test the null hypothesis that there is <em>no</em> statistical difference in penalty conversion rates between men and women.</li> <li>Roughly speaking, this test evaluates the difference between an observed count $O$ and and expected count $E$ under the null hypothesis and evaluates $\sum_{i,j}(O_{ij}-E_{ij})^2/E_{ij}$.<br/> These values are summed over all cells in the $2 \times 2$ possible output space $(i,j) \in \{\text{Gender} \times \text{Scored}\}$. If this sum is large, then the observed values are far from what is a likely observation under the null hypothesis so we reject the null hypothesis as it yields an unlikely result.</li> <li>The degrees of freedom (dof) for the test is $(nrows - 1)(ncols-1) = (2-1)(2-1) = 1$.</li> </ul> <h4 id="test-results">Test Results</h4> <ol> <li>For the full time period, the chi-squared test statistic is $9.745$ which has a $p$-value of $0.0018$.<br/> We can reject the null hypothesis at the $\alpha = 5\%$ level as $\alpha$ is larger than $p$. This is often a sufficiently fine level to reject the null hypothesis. So there is a statistically significant difference in conversion rate between men and women.</li> <li>Pre-2018 Analysis: Chi-squared value is approximately 40.124 with a p-value of about $2.38e-10$, indicating a <strong>very strong statistically significant difference</strong> in penalty conversion rates between men and women before 2018.</li> <li>2018 Onwards Analysis: Chi-squared value is approximately 0.741 with a p-value of $0.389$. This suggests that there is no statistically significant difference in penalty conversion rates between men and women from 2018 onwards.</li> </ol> <p>In conclusion, although it may have historically seemed that women had a better conversion rate, more recent evidence is not strong enough to maintain this position.</p>]]></content><author><name>Charlie Dickens</name></author><category term="statistics,"/><category term="sports"/><summary type="html"><![CDATA[Comparing the penalty-taking abilities of men and women.]]></summary></entry><entry><title type="html">Understanding Errors of Cardinality Estimators</title><link href="https://c-dickens.github.io/blog/2023/cardinality-errors/" rel="alternate" type="text/html" title="Understanding Errors of Cardinality Estimators"/><published>2023-09-22T11:03:16+00:00</published><updated>2023-09-22T11:03:16+00:00</updated><id>https://c-dickens.github.io/blog/2023/cardinality-errors</id><content type="html" xml:base="https://c-dickens.github.io/blog/2023/cardinality-errors/"><![CDATA[<h1 id="error-guarantees-for-cardinality-estimators">Error Guarantees for Cardinality Estimators</h1> <p><em>A note to on how to derive the error rates for common cardinality estimation algorithms when the number of buckets is large enough to assume Gaussian error</em>.</p> <p>Probabilistic approximation algorithms often come with what is called \((\epsilon, \delta)\) guarantees.<br/> Such a guarantee means that with probability at least \(1-\delta\), the algorithm returns an estimate that is accurate within some bounds that are defined by the parameter \(\epsilon\). The specific type of guarantee may vary from algorithm to algorithm; for example, if the quantity we wish to estimate is \(x\) and the returned value is \(\hat{x}\), then we may seek estimates of the form \((1-\epsilon) x \le \hat{x} \le (1+\epsilon)x.\) Alternatively, other types of algorithm (e.g. a CountMin sketch) returns estimates of the form: \(x \le \hat{x} \le (1+\epsilon)x.\)</p> <p>However, <em>cardinality estimation</em> algorithms typically come with a guarantee on the <em>standard error</em> or the <em>variance</em> of the estimator. These guarantees are related and it often takes me an annoying amount of time to translate between the two. This is especially frustrating because when I think of common unique counting algorithms (such as the \(k\)-minimum values) algorithm, there is an associated guarantee of correctness for that algorithm. However, that guarantee is not strictly the same as the one that is given in common libraries such as <a href="https://datasketches.apache.org/docs/Theta/ThetaErrorTable.html">Apache DataSketches error tables</a>. So how to map between the two? The answer is failry simple when the number of buckets in the sketch is large (nb. if this is not the case then the error distribution gets <a href="https://datasketches.apache.org/docs/HLL/HLL.html">truncated at zero and is not Gaussian</a>).</p> <h2 id="from-relative-errors-to-error-distributions">From Relative Errors to Error Distributions</h2> <p>For an input dataset, the cardinality is the number of distinct items in the dataset without multiplicities. Suppose that a cardinality estimation algorithm returns an estimate \(\hat{n}\) for a (multi)set of cardinality \(n\) with standard error \(\sqrt{c} n / \sqrt{k}\). The constant \(c\) is algorithm dependent and the parameter \(k\) is the number of retained samples (or buckets in the sketch). This means that the variance (another way of writing the guarantees) of the estimator is \(c n^2 / k\) and the relative standard error is \(\sqrt{c} / \sqrt{k}\). The <strong>relative standard error</strong> corresponds to the <strong>relative error</strong> that we typically see in algorithms papers; hence we can set \(\epsilon = \sqrt{c} / \sqrt{k}\) so that the number of samples or buckets is related to error as \(k = c / \epsilon^2.\) This format is much closer to what you‚Äôll see in an algorithms paper rather than a statistical paper. It is also easy to get a simple bound on the total space usage of the algorithm by multiplying through the size of the hash domain that is used in the algorithm to get \(\textsf{space} = c \log(U) \epsilon^{-2}.\)</p> <p>Now, how do we use this? Practitioners often want to know how to set the size of the cardinality estimator so that they have confidence interval for the parameter being estimated. To do so, set the failure probability of the algorithm to be \(\delta = 0.05\) which means that we will roughly obtain a \(95\%\) confidence interval. When the number of samples is large enough, the error distribution is (approximately) Gaussian so the associated \(z\)-score is \(1.96\) which we use to adjust the number of buckets as \(k = \frac{c \cdot 1.96^2}{\epsilon^2}.\) If you want different confidence intervals, then you adjust the rescaling factor from the \(z\)-score accordingly.</p> <p>This expression will give the commonly used error bounds for standard sketches. Improved bounds can be given with more work, but once you begin to merge sketches, things tend to revert to the setting given above. All of this is done assuming that the number of buckets in the sketch is sufficiently large to assume Gaussian errors. If the number of buckets is small, then the distribution gets truncated at zero and this squashes the distribution so the analysis above does not apply.</p>]]></content><author><name>Charlie Dickens</name></author><category term="sketches"/><category term="maths"/><summary type="html"><![CDATA[Converting from relative error to RSE bounds]]></summary></entry></feed>